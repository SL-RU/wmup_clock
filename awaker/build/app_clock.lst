ARM GAS  /tmp/ccNgAHMN.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"app_clock.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	_app_clock
  19              		.section	.data._app_clock,"aw",%progbits
  20              		.align	2
  23              	_app_clock:
  24 0000 00       		.byte	0
  25 0001 000000   		.space	3
  26 0004 00000000 		.word	app_clock_open
  27 0008 00000000 		.word	app_clock_update
  28 000c 00000000 		.word	app_clock_draw
  29 0010 00000000 		.word	app_clock_encoder
  30 0014 00000000 		.word	app_clock_buttons
  31 0018 00000000 		.word	app_clock_can_close
  32 001c 00000000 		.word	app_clock_close
  33              		.section	.text.app_clock,"ax",%progbits
  34              		.align	2
  35              		.global	app_clock
  36              		.thumb
  37              		.thumb_func
  39              	app_clock:
  40              	.LFB63:
  41              		.file 1 "app/app_clock.c"
   1:app/app_clock.c **** #include "app_clock.h"
   2:app/app_clock.c **** #include "speaker.h"
   3:app/app_clock.c **** 
   4:app/app_clock.c **** App_Struct _app_clock = {
   5:app/app_clock.c ****     APP_CLOCK_ID,
   6:app/app_clock.c ****     &app_clock_open,
   7:app/app_clock.c ****     &app_clock_update,
   8:app/app_clock.c ****     &app_clock_draw,
   9:app/app_clock.c ****     &app_clock_encoder,
  10:app/app_clock.c ****     &app_clock_buttons,
  11:app/app_clock.c ****     &app_clock_can_close,
  12:app/app_clock.c ****     &app_clock_close
  13:app/app_clock.c **** };
  14:app/app_clock.c **** 
  15:app/app_clock.c **** App_Struct * app_clock() { return &_app_clock; }
  42              		.loc 1 15 0
  43              		.cfi_startproc
  44              		@ args = 0, pretend = 0, frame = 0
  45              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccNgAHMN.s 			page 2


  46              		@ link register save eliminated.
  47 0000 80B4     		push	{r7}
  48              	.LCFI0:
  49              		.cfi_def_cfa_offset 4
  50              		.cfi_offset 7, -4
  51 0002 00AF     		add	r7, sp, #0
  52              	.LCFI1:
  53              		.cfi_def_cfa_register 7
  54              		.loc 1 15 0
  55 0004 024B     		ldr	r3, .L3
  56 0006 1846     		mov	r0, r3
  57 0008 BD46     		mov	sp, r7
  58              	.LCFI2:
  59              		.cfi_def_cfa_register 13
  60              		@ sp needed
  61 000a 5DF8047B 		ldr	r7, [sp], #4
  62              	.LCFI3:
  63              		.cfi_restore 7
  64              		.cfi_def_cfa_offset 0
  65 000e 7047     		bx	lr
  66              	.L4:
  67              		.align	2
  68              	.L3:
  69 0010 00000000 		.word	_app_clock
  70              		.cfi_endproc
  71              	.LFE63:
  73              		.section	.text.app_clock_open,"ax",%progbits
  74              		.align	2
  75              		.global	app_clock_open
  76              		.thumb
  77              		.thumb_func
  79              	app_clock_open:
  80              	.LFB64:
  16:app/app_clock.c **** 
  17:app/app_clock.c **** void app_clock_open()
  18:app/app_clock.c **** {
  81              		.loc 1 18 0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 1, uses_anonymous_args = 0
  85              		@ link register save eliminated.
  86 0000 80B4     		push	{r7}
  87              	.LCFI4:
  88              		.cfi_def_cfa_offset 4
  89              		.cfi_offset 7, -4
  90 0002 00AF     		add	r7, sp, #0
  91              	.LCFI5:
  92              		.cfi_def_cfa_register 7
  19:app/app_clock.c ****     
  20:app/app_clock.c **** }
  93              		.loc 1 20 0
  94 0004 BD46     		mov	sp, r7
  95              	.LCFI6:
  96              		.cfi_def_cfa_register 13
  97              		@ sp needed
  98 0006 5DF8047B 		ldr	r7, [sp], #4
  99              	.LCFI7:
ARM GAS  /tmp/ccNgAHMN.s 			page 3


 100              		.cfi_restore 7
 101              		.cfi_def_cfa_offset 0
 102 000a 7047     		bx	lr
 103              		.cfi_endproc
 104              	.LFE64:
 106              		.section	.text.app_clock_update,"ax",%progbits
 107              		.align	2
 108              		.global	app_clock_update
 109              		.thumb
 110              		.thumb_func
 112              	app_clock_update:
 113              	.LFB65:
  21:app/app_clock.c **** 
  22:app/app_clock.c **** void app_clock_update()
  23:app/app_clock.c **** {
 114              		.loc 1 23 0
 115              		.cfi_startproc
 116              		@ args = 0, pretend = 0, frame = 0
 117              		@ frame_needed = 1, uses_anonymous_args = 0
 118              		@ link register save eliminated.
 119 0000 80B4     		push	{r7}
 120              	.LCFI8:
 121              		.cfi_def_cfa_offset 4
 122              		.cfi_offset 7, -4
 123 0002 00AF     		add	r7, sp, #0
 124              	.LCFI9:
 125              		.cfi_def_cfa_register 7
  24:app/app_clock.c **** }
 126              		.loc 1 24 0
 127 0004 BD46     		mov	sp, r7
 128              	.LCFI10:
 129              		.cfi_def_cfa_register 13
 130              		@ sp needed
 131 0006 5DF8047B 		ldr	r7, [sp], #4
 132              	.LCFI11:
 133              		.cfi_restore 7
 134              		.cfi_def_cfa_offset 0
 135 000a 7047     		bx	lr
 136              		.cfi_endproc
 137              	.LFE65:
 139              		.section	.rodata
 140              		.align	2
 141              	.LC0:
 142 0000 74696D65 		.ascii	"time: %02d:%02d:%02d\000"
 142      3A202530 
 142      32643A25 
 142      3032643A 
 142      25303264 
 143 0015 000000   		.align	2
 144              	.LC1:
 145 0018 616C6172 		.ascii	"alarm:%d %02d:%02d\000"
 145      6D3A2564 
 145      20253032 
 145      643A2530 
 145      326400
 146 002b 00       		.section	.text.app_clock_draw,"ax",%progbits
 147              		.align	2
ARM GAS  /tmp/ccNgAHMN.s 			page 4


 148              		.global	app_clock_draw
 149              		.thumb
 150              		.thumb_func
 152              	app_clock_draw:
 153              	.LFB66:
  25:app/app_clock.c **** void app_clock_draw()
  26:app/app_clock.c **** {
 154              		.loc 1 26 0
 155              		.cfi_startproc
 156              		@ args = 0, pretend = 0, frame = 8
 157              		@ frame_needed = 1, uses_anonymous_args = 0
 158 0000 80B5     		push	{r7, lr}
 159              	.LCFI12:
 160              		.cfi_def_cfa_offset 8
 161              		.cfi_offset 7, -8
 162              		.cfi_offset 14, -4
 163 0002 82B0     		sub	sp, sp, #8
 164              	.LCFI13:
 165              		.cfi_def_cfa_offset 16
 166 0004 00AF     		add	r7, sp, #0
 167              	.LCFI14:
 168              		.cfi_def_cfa_register 7
  27:app/app_clock.c ****     RTC_TimeTypeDef * tm = clock_get_time();
 169              		.loc 1 27 0
 170 0006 FFF7FEFF 		bl	clock_get_time
 171 000a 7860     		str	r0, [r7, #4]
  28:app/app_clock.c ****     Clock_AlarmReg * ar = clock_alarm_get();
 172              		.loc 1 28 0
 173 000c FFF7FEFF 		bl	clock_alarm_get
 174 0010 3860     		str	r0, [r7]
  29:app/app_clock.c ****     hd44780_position(0, 0);
 175              		.loc 1 29 0
 176 0012 0020     		movs	r0, #0
 177 0014 0021     		movs	r1, #0
 178 0016 FFF7FEFF 		bl	hd44780_position
  30:app/app_clock.c ****     hd44780_printf("time: %02d:%02d:%02d",  tm->Hours, tm->Minutes, tm->Seconds);
 179              		.loc 1 30 0
 180 001a 7B68     		ldr	r3, [r7, #4]
 181 001c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 182 001e 1946     		mov	r1, r3
 183 0020 7B68     		ldr	r3, [r7, #4]
 184 0022 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 185 0024 1A46     		mov	r2, r3
 186 0026 7B68     		ldr	r3, [r7, #4]
 187 0028 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 188 002a 0F48     		ldr	r0, .L8
 189 002c FFF7FEFF 		bl	hd44780_printf
  31:app/app_clock.c **** 
  32:app/app_clock.c ****     hd44780_position(1, 0);
 190              		.loc 1 32 0
 191 0030 0120     		movs	r0, #1
 192 0032 0021     		movs	r1, #0
 193 0034 FFF7FEFF 		bl	hd44780_position
  33:app/app_clock.c ****     hd44780_printf("alarm:%d %02d:%02d", ar->enabled, ar->hour, ar->minute);
 194              		.loc 1 33 0
 195 0038 3B68     		ldr	r3, [r7]
 196 003a 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccNgAHMN.s 			page 5


 197 003c C3F30003 		ubfx	r3, r3, #0, #1
 198 0040 DBB2     		uxtb	r3, r3
 199 0042 1946     		mov	r1, r3
 200 0044 3B68     		ldr	r3, [r7]
 201 0046 1B78     		ldrb	r3, [r3]
 202 0048 C3F34403 		ubfx	r3, r3, #1, #5
 203 004c DBB2     		uxtb	r3, r3
 204 004e 1A46     		mov	r2, r3
 205 0050 3B68     		ldr	r3, [r7]
 206 0052 5B78     		ldrb	r3, [r3, #1]
 207 0054 C3F30403 		ubfx	r3, r3, #0, #5
 208 0058 DBB2     		uxtb	r3, r3
 209 005a 0448     		ldr	r0, .L8+4
 210 005c FFF7FEFF 		bl	hd44780_printf
  34:app/app_clock.c **** }
 211              		.loc 1 34 0
 212 0060 0837     		adds	r7, r7, #8
 213              	.LCFI15:
 214              		.cfi_def_cfa_offset 8
 215 0062 BD46     		mov	sp, r7
 216              	.LCFI16:
 217              		.cfi_def_cfa_register 13
 218              		@ sp needed
 219 0064 80BD     		pop	{r7, pc}
 220              	.L9:
 221 0066 00BF     		.align	2
 222              	.L8:
 223 0068 00000000 		.word	.LC0
 224 006c 18000000 		.word	.LC1
 225              		.cfi_endproc
 226              	.LFE66:
 228              		.section	.text.app_clock_encoder,"ax",%progbits
 229              		.align	2
 230              		.global	app_clock_encoder
 231              		.thumb
 232              		.thumb_func
 234              	app_clock_encoder:
 235              	.LFB67:
  35:app/app_clock.c **** void app_clock_encoder(int16_t val, int16_t del)
  36:app/app_clock.c **** {
 236              		.loc 1 36 0
 237              		.cfi_startproc
 238              		@ args = 0, pretend = 0, frame = 8
 239              		@ frame_needed = 1, uses_anonymous_args = 0
 240              		@ link register save eliminated.
 241 0000 80B4     		push	{r7}
 242              	.LCFI17:
 243              		.cfi_def_cfa_offset 4
 244              		.cfi_offset 7, -4
 245 0002 83B0     		sub	sp, sp, #12
 246              	.LCFI18:
 247              		.cfi_def_cfa_offset 16
 248 0004 00AF     		add	r7, sp, #0
 249              	.LCFI19:
 250              		.cfi_def_cfa_register 7
 251 0006 0346     		mov	r3, r0
 252 0008 0A46     		mov	r2, r1
ARM GAS  /tmp/ccNgAHMN.s 			page 6


 253 000a FB80     		strh	r3, [r7, #6]	@ movhi
 254 000c 1346     		mov	r3, r2	@ movhi
 255 000e BB80     		strh	r3, [r7, #4]	@ movhi
  37:app/app_clock.c **** }
 256              		.loc 1 37 0
 257 0010 0C37     		adds	r7, r7, #12
 258              	.LCFI20:
 259              		.cfi_def_cfa_offset 4
 260 0012 BD46     		mov	sp, r7
 261              	.LCFI21:
 262              		.cfi_def_cfa_register 13
 263              		@ sp needed
 264 0014 5DF8047B 		ldr	r7, [sp], #4
 265              	.LCFI22:
 266              		.cfi_restore 7
 267              		.cfi_def_cfa_offset 0
 268 0018 7047     		bx	lr
 269              		.cfi_endproc
 270              	.LFE67:
 272 001a 00BF     		.section	.text.app_clock_buttons,"ax",%progbits
 273              		.align	2
 274              		.global	app_clock_buttons
 275              		.thumb
 276              		.thumb_func
 278              	app_clock_buttons:
 279              	.LFB68:
  38:app/app_clock.c **** void app_clock_buttons(uint8_t b, uint8_t e)
  39:app/app_clock.c **** {
 280              		.loc 1 39 0
 281              		.cfi_startproc
 282              		@ args = 0, pretend = 0, frame = 8
 283              		@ frame_needed = 1, uses_anonymous_args = 0
 284 0000 80B5     		push	{r7, lr}
 285              	.LCFI23:
 286              		.cfi_def_cfa_offset 8
 287              		.cfi_offset 7, -8
 288              		.cfi_offset 14, -4
 289 0002 82B0     		sub	sp, sp, #8
 290              	.LCFI24:
 291              		.cfi_def_cfa_offset 16
 292 0004 00AF     		add	r7, sp, #0
 293              	.LCFI25:
 294              		.cfi_def_cfa_register 7
 295 0006 0346     		mov	r3, r0
 296 0008 0A46     		mov	r2, r1
 297 000a FB71     		strb	r3, [r7, #7]
 298 000c 1346     		mov	r3, r2
 299 000e BB71     		strb	r3, [r7, #6]
  40:app/app_clock.c ****     if(b == BITopBig && e == CONTROLS_LONG_PRESSING)
 300              		.loc 1 40 0
 301 0010 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 302 0012 022B     		cmp	r3, #2
 303 0014 05D1     		bne	.L12
 304              		.loc 1 40 0 is_stmt 0 discriminator 1
 305 0016 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 306 0018 082B     		cmp	r3, #8
 307 001a 02D1     		bne	.L12
ARM GAS  /tmp/ccNgAHMN.s 			page 7


  41:app/app_clock.c ****     {
  42:app/app_clock.c **** 	speaker_start();
 308              		.loc 1 42 0 is_stmt 1
 309 001c FFF7FEFF 		bl	speaker_start
 310 0020 01E0     		b	.L13
 311              	.L12:
  43:app/app_clock.c ****     }
  44:app/app_clock.c ****     else
  45:app/app_clock.c **** 	speaker_stop();
 312              		.loc 1 45 0
 313 0022 FFF7FEFF 		bl	speaker_stop
 314              	.L13:
  46:app/app_clock.c **** 
  47:app/app_clock.c ****     if(b == BITopSmall && e == CONTROLS_CLICK)
 315              		.loc 1 47 0
 316 0026 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 317 0028 032B     		cmp	r3, #3
 318 002a 07D1     		bne	.L14
 319              		.loc 1 47 0 is_stmt 0 discriminator 1
 320 002c BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 321 002e 012B     		cmp	r3, #1
 322 0030 04D1     		bne	.L14
  48:app/app_clock.c ****     {
  49:app/app_clock.c **** 	clock_alarm_set(0, 11, 47);
 323              		.loc 1 49 0 is_stmt 1
 324 0032 0020     		movs	r0, #0
 325 0034 0B21     		movs	r1, #11
 326 0036 2F22     		movs	r2, #47
 327 0038 FFF7FEFF 		bl	clock_alarm_set
 328              	.L14:
  50:app/app_clock.c ****     }
  51:app/app_clock.c ****     
  52:app/app_clock.c ****     if(b == BITopSmall && e == CONTROLS_LONG_CLICK)
 329              		.loc 1 52 0
 330 003c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 331 003e 032B     		cmp	r3, #3
 332 0040 07D1     		bne	.L11
 333              		.loc 1 52 0 is_stmt 0 discriminator 1
 334 0042 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 335 0044 042B     		cmp	r3, #4
 336 0046 04D1     		bne	.L11
  53:app/app_clock.c ****     {
  54:app/app_clock.c **** 	clock_alarm_set(1, 20, 13);
 337              		.loc 1 54 0 is_stmt 1
 338 0048 0120     		movs	r0, #1
 339 004a 1421     		movs	r1, #20
 340 004c 0D22     		movs	r2, #13
 341 004e FFF7FEFF 		bl	clock_alarm_set
 342              	.L11:
  55:app/app_clock.c ****     }
  56:app/app_clock.c **** }
 343              		.loc 1 56 0
 344 0052 0837     		adds	r7, r7, #8
 345              	.LCFI26:
 346              		.cfi_def_cfa_offset 8
 347 0054 BD46     		mov	sp, r7
 348              	.LCFI27:
ARM GAS  /tmp/ccNgAHMN.s 			page 8


 349              		.cfi_def_cfa_register 13
 350              		@ sp needed
 351 0056 80BD     		pop	{r7, pc}
 352              		.cfi_endproc
 353              	.LFE68:
 355              		.section	.text.app_clock_can_close,"ax",%progbits
 356              		.align	2
 357              		.global	app_clock_can_close
 358              		.thumb
 359              		.thumb_func
 361              	app_clock_can_close:
 362              	.LFB69:
  57:app/app_clock.c **** 
  58:app/app_clock.c **** uint8_t app_clock_can_close() { return 1; }
 363              		.loc 1 58 0
 364              		.cfi_startproc
 365              		@ args = 0, pretend = 0, frame = 0
 366              		@ frame_needed = 1, uses_anonymous_args = 0
 367              		@ link register save eliminated.
 368 0000 80B4     		push	{r7}
 369              	.LCFI28:
 370              		.cfi_def_cfa_offset 4
 371              		.cfi_offset 7, -4
 372 0002 00AF     		add	r7, sp, #0
 373              	.LCFI29:
 374              		.cfi_def_cfa_register 7
 375              		.loc 1 58 0
 376 0004 0123     		movs	r3, #1
 377 0006 1846     		mov	r0, r3
 378 0008 BD46     		mov	sp, r7
 379              	.LCFI30:
 380              		.cfi_def_cfa_register 13
 381              		@ sp needed
 382 000a 5DF8047B 		ldr	r7, [sp], #4
 383              	.LCFI31:
 384              		.cfi_restore 7
 385              		.cfi_def_cfa_offset 0
 386 000e 7047     		bx	lr
 387              		.cfi_endproc
 388              	.LFE69:
 390              		.section	.text.app_clock_close,"ax",%progbits
 391              		.align	2
 392              		.global	app_clock_close
 393              		.thumb
 394              		.thumb_func
 396              	app_clock_close:
 397              	.LFB70:
  59:app/app_clock.c **** uint8_t app_clock_close() { return 1; }
 398              		.loc 1 59 0
 399              		.cfi_startproc
 400              		@ args = 0, pretend = 0, frame = 0
 401              		@ frame_needed = 1, uses_anonymous_args = 0
 402              		@ link register save eliminated.
 403 0000 80B4     		push	{r7}
 404              	.LCFI32:
 405              		.cfi_def_cfa_offset 4
 406              		.cfi_offset 7, -4
ARM GAS  /tmp/ccNgAHMN.s 			page 9


 407 0002 00AF     		add	r7, sp, #0
 408              	.LCFI33:
 409              		.cfi_def_cfa_register 7
 410              		.loc 1 59 0
 411 0004 0123     		movs	r3, #1
 412 0006 1846     		mov	r0, r3
 413 0008 BD46     		mov	sp, r7
 414              	.LCFI34:
 415              		.cfi_def_cfa_register 13
 416              		@ sp needed
 417 000a 5DF8047B 		ldr	r7, [sp], #4
 418              	.LCFI35:
 419              		.cfi_restore 7
 420              		.cfi_def_cfa_offset 0
 421 000e 7047     		bx	lr
 422              		.cfi_endproc
 423              	.LFE70:
 425              		.text
 426              	.Letext0:
 427              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 428              		.file 3 "/usr/include/newlib/stdint.h"
 429              		.file 4 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rtc.h"
 430              		.file 5 "sys/clock.h"
 431              		.file 6 "app/app.h"
 432              		.file 7 "Drivers/CMSIS/Include/core_cm3.h"
ARM GAS  /tmp/ccNgAHMN.s 			page 10


DEFINED SYMBOLS
                            *ABS*:0000000000000000 app_clock.c
     /tmp/ccNgAHMN.s:23     .data._app_clock:0000000000000000 _app_clock
     /tmp/ccNgAHMN.s:20     .data._app_clock:0000000000000000 $d
     /tmp/ccNgAHMN.s:79     .text.app_clock_open:0000000000000000 app_clock_open
     /tmp/ccNgAHMN.s:112    .text.app_clock_update:0000000000000000 app_clock_update
     /tmp/ccNgAHMN.s:152    .text.app_clock_draw:0000000000000000 app_clock_draw
     /tmp/ccNgAHMN.s:234    .text.app_clock_encoder:0000000000000000 app_clock_encoder
     /tmp/ccNgAHMN.s:278    .text.app_clock_buttons:0000000000000000 app_clock_buttons
     /tmp/ccNgAHMN.s:361    .text.app_clock_can_close:0000000000000000 app_clock_can_close
     /tmp/ccNgAHMN.s:396    .text.app_clock_close:0000000000000000 app_clock_close
     /tmp/ccNgAHMN.s:34     .text.app_clock:0000000000000000 $t
     /tmp/ccNgAHMN.s:39     .text.app_clock:0000000000000000 app_clock
     /tmp/ccNgAHMN.s:69     .text.app_clock:0000000000000010 $d
     /tmp/ccNgAHMN.s:74     .text.app_clock_open:0000000000000000 $t
     /tmp/ccNgAHMN.s:107    .text.app_clock_update:0000000000000000 $t
     /tmp/ccNgAHMN.s:140    .rodata:0000000000000000 $d
     /tmp/ccNgAHMN.s:147    .text.app_clock_draw:0000000000000000 $t
     /tmp/ccNgAHMN.s:223    .text.app_clock_draw:0000000000000068 $d
     /tmp/ccNgAHMN.s:229    .text.app_clock_encoder:0000000000000000 $t
     /tmp/ccNgAHMN.s:273    .text.app_clock_buttons:0000000000000000 $t
     /tmp/ccNgAHMN.s:356    .text.app_clock_can_close:0000000000000000 $t
     /tmp/ccNgAHMN.s:391    .text.app_clock_close:0000000000000000 $t
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
clock_get_time
clock_alarm_get
hd44780_position
hd44780_printf
speaker_start
speaker_stop
clock_alarm_set
